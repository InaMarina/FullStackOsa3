(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(16),o=n.n(u),c=n(17),l=n(6),i=n(2),m=n(4),f=n.n(m),s="/api/persons",d=function(){return f.a.get(s).then((function(e){return e.data}))},h=function(e){return f.a.post(s,e).then((function(e){return e.data}))},b=function(e){return f.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},v=function(e,t){return f.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},g=function(e){var t=e.person;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t.name," ",t.number))},p=function(e){var t=e.persons,n=e.onclick;return console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(g,{person:e}),r.a.createElement("button",{onClick:function(){return n(e.id)}},"delete"))}))))},E=function(e){return r.a.createElement("div",null,e.text," ",r.a.createElement("input",{value:e.value,onChange:e.onChange}))},w=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement(E,{text:e.text1,value:e.value1,onChange:e.onChange1}),r.a.createElement(E,{text:e.text2,value:e.value2,onChange:e.onChange2}),r.a.createElement("button",{type:"submit"},"add")))},j=function(e){return r.a.createElement("div",null,e.text," ",r.a.createElement("input",{value:e.value,onChange:e.onChange}))},C=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],o=Object(a.useState)(""),m=Object(i.a)(o,2),f=m[0],s=m[1],g=Object(a.useState)(""),E=Object(i.a)(g,2),C=E[0],O=E[1],k=Object(a.useState)(""),x=Object(i.a)(k,2),S=x[0],y=x[1],T=Object(a.useState)([]),L=Object(i.a)(T,2),D=L[0],F=L[1],J=Object(a.useState)(null),N=Object(i.a)(J,2),A=N[0],B=N[1];Object(a.useEffect)((function(){console.log("effect"),d().then((function(e){u(e),F(e)}))}),[]);var I=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(I,{message:A}),r.a.createElement(j,{text:"filter shown with",value:S,onChange:function(e){if(y(e.target.value),e.target.value.length>0){var t=Object(c.a)(n).filter((function(t){return t.name.startsWith(e.target.value)}));F(t)}0===e.target.value.length&&F(n)}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(w,{onSubmit:function(e){e.preventDefault();var t={name:f,number:C},a=n.some((function(e){return e.name.toLowerCase()===f.toLowerCase()})),r=n.some((function(e){return e.number.replace(/ /g,"")===C.replace(/ /g,"")}));if(a){if(a&&r)window.alert("".concat(f," is already in the phonebook"));else if(a&&!r){var o=n.find((function(e){return e.name.toLowerCase()===f.toLowerCase()})),c=Object(l.a)(Object(l.a)({},o),{},{number:C});window.confirm("".concat(f," is already in the phonebook, do you want to replace the old number with a new one? "))&&v(c.id,c).then((function(e){u(n.map((function(t){return t.id!==c.id?t:e}))),F(n.map((function(t){return t.id!==c.id?t:e}))),B("".concat(o.name,"'s number was sucessfully changed!"),"ok"),setTimeout((function(){B(null)}),5e3)})).catch((function(e){var t=e.response.data.error;console.log(t)}))}}else h(t).then((function(e){u(n.concat(e)),F(n.concat(e)),B("".concat(t.name," is added to the phonebook!"),"ok"),setTimeout((function(){B(null)}),5e3)})).catch((function(e){B(e.response.data.error),setTimeout((function(){B(null)}),5e3)}));s(""),O("")},text1:"name: ",value1:f,onChange1:function(e){s(e.target.value)},text2:"number: ",value2:C,onChange2:function(e){O(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{persons:D,onclick:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name))&&b(e).then((function(a){u(n.filter((function(t){return t.id!==e}))),F(n.filter((function(t){return t.id!==e}))),B("Deleted ".concat(t.name)),setTimeout((function(){B(null)}),5e3)})).catch((function(){u(n.filter((function(t){return t.id!==e}))),F(n.filter((function(t){return t.id!==e}))),B("".concat(t.name," had already been removed")),setTimeout((function(){B(null)}),5e3)}))}}))};n(40);o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.f7aefe26.chunk.js.map