{"version":3,"sources":["services/persons.js","components/Person.js","components/Personlist.js","components/PersonForm.js","components/FilterForm.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Person","person","name","number","Personlist","persons","onclick","console","log","map","key","onClick","Input","props","text","value","onChange","PersonForm","onSubmit","text1","value1","onChange1","text2","value2","onChange2","type","FilterForm","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","show","setShow","errorMessage","setErrorMessage","useEffect","personService","personsFromDb","Notification","message","className","event","target","length","filteredList","filter","startsWith","preventDefault","personObject","window","confirm","personToUpdate","find","p","retunedPerson","returnedData","setTimeout","toDelete","catch","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8f8a2ae3.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"http://localhost:3001/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nexport default {\n  getAll: getAll,\n  create: create,\n  remove: remove,\n  update: update,\n};\n","import React from \"react\";\n\nconst Person = ({ person }) => {\n  return (\n    <>\n      <p>\n        {person.name} {person.number}\n      </p>\n    </>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Personlist = ({ persons, onclick }) => {\n  console.log(persons);\n  return (\n    <>\n      <ul>\n        {persons.map((person) => (\n          <div key={person.id}>\n            <Person person={person} />\n            <button onClick={() => onclick(person.id)}>delete</button>\n          </div>\n        ))}\n      </ul>\n    </>\n  );\n};\n\nexport default Personlist;\n","import React from 'react'\n\nconst PersonForm = (props) => {\n  return (\n    <>\n    <form onSubmit={props.onSubmit}>\n        <Input text={props.text1} value={props.value1} onChange={props.onChange1} />\n        <Input text={props.text2} value={props.value2} onChange={props.onChange2} />\n        <button type=\"submit\">add</button>\n    </form>\n    </>\n  )\n}\n\nconst Input = (props) => {\n    return (\n        <div>\n        {props.text} <input value={props.value}\n          onChange={props.onChange} />\n      </div>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst FilterForm = (props) => {\n    return (\n        <div>\n        {props.text} <input value={props.value}\n          onChange={props.onChange} />\n      </div>\n    )\n}\n\nexport default FilterForm","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport Personlist from \"./components/Personlist\";\nimport PersonForm from \"./components/PersonForm\";\nimport FilterForm from \"./components/FilterForm\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [show, setShow] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    console.log(\"effect\");\n    personService.getAll().then((personsFromDb) => {\n      setPersons(personsFromDb);\n      setShow(personsFromDb);\n    });\n  }, []);\n\n  const Notification = ({ message }) => {\n    if (message === null) {\n      return null;\n    }\n\n    return <div className=\"error\">{message}</div>;\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    if (persons.filter((person) => person[\"name\"] === newName).length > 0) {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the number with a new one?`\n        )\n      ) {\n        const personToUpdate = persons.find((p) => p.name === newName);\n\n        personService\n          .update(personToUpdate.id, {\n            name: personToUpdate.name,\n            number: newNumber,\n          })\n          .then((retunedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== personToUpdate.id ? person : retunedPerson\n              )\n            );\n            setErrorMessage(`Changed number of  ${personToUpdate.name}`);\n            setNewName(\"\");\n            setNewNumber(\"\");\n          });\n      }\n    } else {\n      personService\n        .create(personObject)\n        .then((returnedData) => console.log(returnedData));\n\n      personService.getAll().then((personsFromDb) => {\n        setPersons(personsFromDb);\n        setShow(personsFromDb);\n        setErrorMessage(`Added ${newName} to the phonebook`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      });\n      setNewName(\"\");\n      setNewNumber(\"\");\n    }\n  };\n\n  const deleteContact = (id) => {\n    const toDelete = persons.find((p) => p.id === id);\n    const ok = window.confirm(`Delete ${toDelete.name}`);\n    if (ok) {\n      personService\n        .remove(id)\n        .then((response) => {\n          setPersons(persons.filter((p) => p.id !== id));\n          setErrorMessage(`Deleted ${toDelete.name}`);\n        })\n        .catch(() => {\n          setPersons(persons.filter((p) => p.id !== id));\n          setErrorMessage(`${toDelete.name} had already been removed`, \"error\");\n        });\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFiltering = (event) => {\n    setNewFilter(event.target.value);\n\n    if (event.target.value.length > 0) {\n      const filteredList = [...persons].filter((person) =>\n        person[\"name\"].startsWith(event.target.value)\n      );\n      setShow(filteredList);\n    }\n    if (event.target.value.length === 0) {\n      setShow(persons);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <FilterForm\n        text={\"filter shown with\"}\n        value={newFilter}\n        onChange={handleFiltering}\n      />\n      <h2>Add a new</h2>\n\n      <PersonForm\n        onSubmit={addPerson}\n        text1={\"name: \"}\n        value1={newName}\n        onChange1={handleNameChange}\n        text2={\"number: \"}\n        value2={newNumber}\n        onChange2={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <Personlist persons={show} onclick={deleteContact} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}