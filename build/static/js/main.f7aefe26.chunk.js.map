{"version":3,"sources":["services/persons.js","components/Person.js","components/Personlist.js","components/PersonForm.js","components/FilterForm.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Person","person","name","number","Personlist","persons","onclick","console","log","map","key","onClick","Input","props","text","value","onChange","PersonForm","onSubmit","text1","value1","onChange1","text2","value2","onChange2","type","FilterForm","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","show","setShow","errorMessage","setErrorMessage","useEffect","personService","personsFromDb","Notification","message","className","event","target","length","filteredList","filter","startsWith","preventDefault","personObject","isTheNameSame","some","toLowerCase","isTheNumberSame","replace","window","alert","find","changedPerson","confirm","setTimeout","catch","error","errMessage","returnedPerson","concat","toDelete","p","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f7aefe26.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nexport default {\n  getAll: getAll,\n  create: create,\n  remove: remove,\n  update: update,\n};\n","import React from \"react\";\n\nconst Person = ({ person }) => {\n  return (\n    <>\n      <p>\n        {person.name} {person.number}\n      </p>\n    </>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Personlist = ({ persons, onclick }) => {\n  console.log(persons);\n  return (\n    <>\n      <ul>\n        {persons.map((person) => (\n          <div key={person.id}>\n            <Person person={person} />\n            <button onClick={() => onclick(person.id)}>delete</button>\n          </div>\n        ))}\n      </ul>\n    </>\n  );\n};\n\nexport default Personlist;\n","import React from 'react'\n\nconst PersonForm = (props) => {\n  return (\n    <>\n    <form onSubmit={props.onSubmit}>\n        <Input text={props.text1} value={props.value1} onChange={props.onChange1} />\n        <Input text={props.text2} value={props.value2} onChange={props.onChange2} />\n        <button type=\"submit\">add</button>\n    </form>\n    </>\n  )\n}\n\nconst Input = (props) => {\n    return (\n        <div>\n        {props.text} <input value={props.value}\n          onChange={props.onChange} />\n      </div>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst FilterForm = (props) => {\n    return (\n        <div>\n        {props.text} <input value={props.value}\n          onChange={props.onChange} />\n      </div>\n    )\n}\n\nexport default FilterForm","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport Personlist from \"./components/Personlist\";\nimport PersonForm from \"./components/PersonForm\";\nimport FilterForm from \"./components/FilterForm\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [show, setShow] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    console.log(\"effect\");\n    personService.getAll().then((personsFromDb) => {\n      setPersons(personsFromDb);\n      setShow(personsFromDb);\n    });\n  }, []);\n\n  const Notification = ({ message }) => {\n    if (message === null) {\n      return null;\n    }\n\n    return <div className=\"error\">{message}</div>;\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    const isTheNameSame = persons.some(\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\n    );\n    const isTheNumberSame = persons.some(\n      (person) =>\n        person.number.replace(/ /g, \"\") === newNumber.replace(/ /g, \"\")\n    );\n\n    if (!isTheNameSame) {\n      personService\n        .create(personObject)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setShow(persons.concat(returnedPerson));\n          setErrorMessage(\n            `${personObject.name} is added to the phonebook!`,\n            \"ok\"\n          );\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    } else if (isTheNameSame && isTheNumberSame) {\n      window.alert(`${newName} is already in the phonebook`);\n    } else if (isTheNameSame && !isTheNumberSame) {\n      const person = persons.find(\n        (person) => person.name.toLowerCase() === newName.toLowerCase()\n      );\n      const changedPerson = { ...person, number: newNumber };\n      const ok = window.confirm(\n        `${newName} is already in the phonebook, do you want to replace the old number with a new one? `\n      );\n      if (ok) {\n        personService\n          .update(changedPerson.id, changedPerson)\n          .then((response) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== changedPerson.id ? person : response\n              )\n            );\n            setShow(\n              persons.map((person) =>\n                person.id !== changedPerson.id ? person : response\n              )\n            );\n            setErrorMessage(\n              `${person.name}'s number was sucessfully changed!`,\n              \"ok\"\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          })\n          .catch((error) => {\n            const errMessage = error.response.data.error;\n            console.log(errMessage);\n          });\n      }\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const deleteContact = (id) => {\n    const toDelete = persons.find((p) => p.id === id);\n    const ok = window.confirm(`Delete ${toDelete.name}`);\n    if (ok) {\n      personService\n        .remove(id)\n        .then((response) => {\n          setPersons(persons.filter((p) => p.id !== id));\n          setShow(persons.filter((p) => p.id !== id));\n          setErrorMessage(`Deleted ${toDelete.name}`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        })\n        .catch(() => {\n          setPersons(persons.filter((person) => person.id !== id));\n          setShow(persons.filter((person) => person.id !== id));\n          setErrorMessage(`${toDelete.name} had already been removed`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFiltering = (event) => {\n    setNewFilter(event.target.value);\n\n    if (event.target.value.length > 0) {\n      const filteredList = [...persons].filter((person) =>\n        person[\"name\"].startsWith(event.target.value)\n      );\n      setShow(filteredList);\n    }\n    if (event.target.value.length === 0) {\n      setShow(persons);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <FilterForm\n        text={\"filter shown with\"}\n        value={newFilter}\n        onChange={handleFiltering}\n      />\n      <h2>Add a new</h2>\n\n      <PersonForm\n        onSubmit={addPerson}\n        text1={\"name: \"}\n        value1={newName}\n        onChange1={handleNameChange}\n        text2={\"number: \"}\n        value2={newNumber}\n        onChange2={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <Personlist persons={show} onclick={deleteContact} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}